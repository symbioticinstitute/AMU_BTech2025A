<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMU B.Tech Admission Test 2025 - Rank Predictor</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #1abc9c;
            --light: #ecf0f1;
            --success: #2ecc71;
            --warning: #f39c12;
            --info: #00bcd4;
            --danger: #e74c3c;
            --dark: #34495e;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            margin: 0;
            padding: 0;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .calculator-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 25px 20px;
            text-align: center;
            position: relative;
        }
        
        .header h1 {
            margin: 0;
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        .header p {
            margin: 10px 0 0;
            font-size: 14px;
            opacity: 0.9;
        }
        
        .form-container {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
            font-size: 15px;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
            box-sizing: border-box;
        }
        
        input:focus, select:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(26, 188, 156, 0.2);
            outline: none;
        }
        
        button {
            background: linear-gradient(to right, var(--secondary), var(--accent));
            color: white;
            border: none;
            border-radius: 8px;
            padding: 14px 20px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(26, 188, 156, 0.2);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 14px rgba(26, 188, 156, 0.3);
        }
        
        .result {
            display: none;
            margin-top: 30px;
            padding: 25px;
            border-radius: 10px;
            background-color: #f1f9ff;
            border-left: 5px solid var(--info);
        }
        
        .result h2 {
            margin-top: 0;
            color: var(--primary);
            font-size: 20px;
        }
        
        .result-item {
            margin: 15px 0;
            font-size: 16px;
            display: flex;
            justify-content: space-between;
            padding-bottom: 10px;
            border-bottom: 1px dashed #ddd;
        }
        
        .result-item:last-child {
            border-bottom: none;
        }
        
        .result-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        .result-rank {
            font-size: 32px;
            font-weight: bold;
            color: var(--info);
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            background: #e1f0fa;
            border-radius: 8px;
        }
        
        .result-note {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            background-color: #fdf2e9;
            border-left: 4px solid var(--warning);
            font-size: 14px;
            display: none;
        }
        
        .result-below-cutoff {
            background-color: #fae5e5;
            border-left: 4px solid var(--danger);
        }
        
        .info-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .info-heading {
            color: var(--primary);
            font-size: 18px;
            margin-top: 0;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .info-point {
            margin: 12px 0;
            font-size: 14px;
            display: flex;
            align-items: flex-start;
        }
        
        .info-icon {
            color: var(--info);
            margin-right: 10px;
            font-size: 18px;
            min-width: 20px;
            text-align: center;
        }
        
        .contact {
            margin-top: 10px;
            padding: 12px;
            background-color: #f8f9fa;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
        }
        
        .error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 20px;
            }
            
            .form-container {
                padding: 20px;
            }
        }
        
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .badge-info {
            background-color: #e1f0fa;
            color: var(--info);
        }
        
        .seat-info {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        
        .seat-item {
            flex-basis: 48%;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 14px;
            text-align: center;
        }
        
        .total-seats {
            background-color: #e1f5fe;
            border: 2px solid #29b6f6;
            color: #0277bd;
        }
        
        .seat-count {
            font-weight: 600;
            color: var(--secondary);
            display: block;
            font-size: 18px;
            margin-top: 5px;
        }
        
        .total-seats .seat-count {
            color: #0277bd;
            font-weight: 700;
        }
        
        /* Gradient animated scrolling banner */
        .gradient-banner {
            margin-top: 15px;
            padding: 12px 0;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            background: linear-gradient(-45deg, #1abc9c, #3498db, #2c3e50, #8e44ad);
            background-size: 400% 400%;
            animation: gradient-shift 8s ease infinite;
        }
        
        .gradient-text {
            display: inline-block;
            color: white;
            font-weight: 600;
            font-size: 14px;
            white-space: nowrap;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            animation: scroll-left 20s linear infinite;
            padding-left: 100%;
        }
        
        @keyframes gradient-shift {
            0% { background-position: 0% 50% }
            50% { background-position: 100% 50% }
            100% { background-position: 0% 50% }
        }
        
        @keyframes scroll-left {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="calculator-card">
            <div class="header">
                <h1>AMU B.Tech Admission Test 2025</h1>
                <p>Expected Rank Calculator</p>
                <span class="badge badge-info">13,639 Students Appeared This Year</span>
                <div style="font-weight: bold; color: #ffeb3b; text-align: center; margin-top: 10px; font-size: 18px; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">SYMBIOTIC INSTITUTE</div>
                <div class="gradient-banner">
                    <div class="gradient-text">This rank calculator is designed for general/external candidates only. There are various categories for AMU admissions, and for those categories, there will be slight variations in marks and ranks.</div>
                </div>
            </div>
            
            <div class="form-container">
                <form id="rankForm">
                    <div class="form-group">
                        <label for="name">Student Name:</label>
                        <input type="text" id="name" placeholder="Enter student name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="marks">Marks Obtained:</label>
                        <input type="number" id="marks" min="0" max="100" placeholder="Enter marks (0-100)" required>
                        <div id="marksError" class="error">Please enter marks between 0 and 100.</div>
                    </div>
                    
                    <button type="submit" id="submitBtn">Calculate Expected Rank</button>
                </form>
            </div>
        </div>
        
        <div id="result" class="result">
            <h2>Rank Prediction Results</h2>
            <div class="result-item">
                <span>Student Name:</span>
                <span id="resultName" class="result-value"></span>
            </div>
            <div class="result-item">
                <span>Marks:</span>
                <span id="resultMarks" class="result-value"></span>
            </div>
            
            <div class="result-rank" id="resultRank">Rank: 0</div>
            
            <div class="result-item" id="waitingListSection">
                <span>Waiting List Rank:</span>
                <span id="resultWaitingRank" class="result-value"></span>
            </div>
            
            <div class="seat-info" id="seatInfo">
                <!-- Seat information will be populated by JavaScript -->
            </div>
            
            <div id="resultNote" class="result-note">
                <!-- Note about cutoff or other relevant information -->
            </div>
        </div>
        
        <div class="info-card">
            <h3 class="info-heading">Important Information</h3>
            
            <div class="info-point" style="background-color: #e1f5fe; padding: 12px; border-radius: 8px; margin-bottom: 15px;">
                <span class="info-icon">⚠️</span>
                <span><strong>Note:</strong> This rank predictor is designed for general/external candidates only. There are various categories for AMU admissions, and for those categories, there will be slight variations in marks and ranks.</span>
            </div>
            
            <div class="info-point">
                <span class="info-icon">📊</span>
                <span>This year's examination was conducted out of 100 marks, compared to last year's 150 marks format. Rankings have been adjusted accordingly.</span>
            </div>
            
            <div class="info-point">
                <span class="info-icon">ℹ️</span>
                <span>This expected rank calculator is based on the previous cutoffs, information collected from students, the question level of this year's paper, and cutoffs expected by different experts. It may not be 100% perfect.</span>
            </div>
            
            <div class="info-point">
                <span class="info-icon">💺</span>
                <span>
                    <strong>Total Seats:</strong><br>
                    • B.Tech Program: 480 seats
                </span>
            </div>
            
            <div class="info-point">
                <span class="info-icon">📞</span>
                <span>If you need any help regarding counselling or have questions, please contact us:</span>
            </div>
            
            <div class="contact">
                09149822922
            </div>
        </div>
    </div>

    <script>
        // Analytics code - track usage
        let visitCount = 0;
        let calculationCount = 0;
        
        // Check if localStorage is available
        function isLocalStorageAvailable() {
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                return true;
            } catch (e) {
                return false;
            }
        }
        
        // Initialize analytics
        function initAnalytics() {
            if (isLocalStorageAvailable()) {
                // Increment visit count
                visitCount = parseInt(localStorage.getItem('btechToolVisits') || '0') + 1;
                localStorage.setItem('btechToolVisits', visitCount.toString());
                
                // Get calculation count
                calculationCount = parseInt(localStorage.getItem('btechToolCalculations') || '0');
                
                // Log visit (you can replace this with your own analytics solution)
                console.log(`Visit #${visitCount} recorded`);
            }
        }
        
        // Log a calculation
        function logCalculation(studentData) {
            if (isLocalStorageAvailable()) {
                calculationCount++;
                localStorage.setItem('btechToolCalculations', calculationCount.toString());
                
                // Log calculation (you can replace this with your own analytics solution)
                console.log(`Calculation #${calculationCount} recorded`, studentData);
            }
        }
        
        // Rank calculation lookup table to ensure consistency (adjusted by +3 marks)
        const rankLookupTable = {
            // For ranks 1-20 (63+ marks)
            63: 20, 64: 19, 65: 18, 66: 17, 67: 16, 68: 15, 
            69: 14, 70: 13, 71: 12, 72: 11, 73: 10, 74: 9, 
            75: 8, 76: 7, 77: 6, 78: 5, 79: 4, 80: 3, 
            81: 2, 82: 1, 83: 1, 84: 1, 85: 1, 86: 1, 
            87: 1, 88: 1, 89: 1, 90: 1, 91: 1, 92: 1, 
            93: 1, 94: 1, 95: 1, 96: 1, 97: 1, 98: 1, 
            99: 1, 100: 1
        };
        
        // Waiting list lookup table (adjusted by +3 marks)
        const waitingLookupTable = {
            // For waiting list positions (23-40 marks)
            23: 350, 24: 330, 25: 310, 26: 290, 27: 270, 28: 250,
            29: 230, 30: 210, 31: 190, 32: 170, 33: 150, 34: 130,
            35: 110, 36: 90, 37: 70, 38: 50, 39: 30, 40: 10
        };
        
        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize analytics when page loads
            initAnalytics();
            
            // Get form element
            const form = document.getElementById('rankForm');
            
            // Course data with total seats
            const courseData = {
                btech: {
                    name: "B.Tech Program",
                    totalSeats: 480,
                    cutoff: 20 // Minimum marks required for consideration
                }
            };
            
            // Add submit event listener
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                calculateRank();
            });
            
            // Also add click event to button as a backup
            document.getElementById('submitBtn').addEventListener('click', function(e) {
                e.preventDefault();
                calculateRank();
            });
            
            // Linear interpolation function for ranks between defined points
            function interpolateRank(marks, minMarks, maxMarks, minRank, maxRank) {
                const markRange = maxMarks - minMarks;
                const rankRange = maxRank - minRank;
                const markPosition = marks - minMarks;
                
                return Math.round(minRank + (markPosition * rankRange / markRange));
            }
            
            // Function to calculate and display rank
            function calculateRank() {
                // Reset note display
                const resultNoteElement = document.getElementById('resultNote');
                resultNoteElement.style.display = 'none';
                resultNoteElement.classList.remove('result-below-cutoff');
                resultNoteElement.textContent = '';
                
                // Get input values
                const name = document.getElementById('name').value.trim();
                const marksInput = document.getElementById('marks').value.trim();
                const marks = parseFloat(marksInput);
                
                // Validate inputs
                if (name === '') {
                    alert('Please enter student name');
                    return;
                }
                
                // Validate marks
                if (marksInput === '' || isNaN(marks) || marks < 0 || marks > 100) {
                    document.getElementById('marksError').style.display = 'block';
                    return;
                } else {
                    document.getElementById('marksError').style.display = 'none';
                }

                // Get course data
                const course = courseData.btech;
                
                // Calculate expected rank based on deterministic logic
                let expectedRank;
                let waitingListRank = "Not in waiting list";
                let statusMessage = "";
                
                if (marks < course.cutoff) {
                    // Less than cutoff marks
                    expectedRank = 'Not Available';
                    statusMessage = 'It is almost impossible to get selected with this marks.';
                    resultNoteElement.style.display = 'block';
                    resultNoteElement.classList.add('result-below-cutoff');
                    resultNoteElement.textContent = statusMessage;
                } else if (marks >= 63) {
                    // For marks 63+: Use lookup table for exact ranks
                    expectedRank = rankLookupTable[Math.floor(marks)];
                    statusMessage = `Congratulations! With ${marks} marks, you have an excellent chance of admission in the top ranks.`;
                    resultNoteElement.style.display = 'block';
                    resultNoteElement.textContent = statusMessage;
                } else if (marks >= 41 && marks < 63) {
                    // For marks 41-62: Use deterministic calculation for ranks 21-480
                    // Create specific rank points at intervals (adjusted by +3 marks)
                    const rankPoints = [
                        {marks: 62, rank: 21},
                        {marks: 58, rank: 80},
                        {marks: 53, rank: 150},
                        {marks: 48, rank: 250},
                        {marks: 43, rank: 370},
                        {marks: 41, rank: 480}
                    ];
                    
                    // Find the appropriate range
                    for (let i = 0; i < rankPoints.length - 1; i++) {
                        if (marks <= rankPoints[i].marks && marks >= rankPoints[i+1].marks) {
                            expectedRank = interpolateRank(
                                marks, 
                                rankPoints[i+1].marks, 
                                rankPoints[i].marks, 
                                rankPoints[i+1].rank, 
                                rankPoints[i].rank
                            );
                            break;
                        }
                    }
                    
                    statusMessage = `With ${marks} marks, you are likely to get a seat in the B.Tech program.`;
                    resultNoteElement.style.display = 'block';
                    resultNoteElement.textContent = statusMessage;
                } else if (marks >= 23 && marks < 41) {
                    // For marks 20-37: Use lookup table for waiting list
                    waitingListRank = waitingLookupTable[Math.floor(marks)];
                    
                    // Handle fractional marks between integer values
                    if (marks % 1 !== 0) {
                        const lowerMark = Math.floor(marks);
                        const upperMark = Math.ceil(marks);
                        
                        if (waitingLookupTable[lowerMark] && waitingLookupTable[upperMark]) {
                            // Interpolate between two known waiting list positions
                            const fraction = marks - lowerMark;
                            waitingListRank = Math.round(
                                waitingLookupTable[lowerMark] - 
                                (fraction * (waitingLookupTable[lowerMark] - waitingLookupTable[upperMark]))
                            );
                        }
                    }
                    
                    expectedRank = course.totalSeats + waitingListRank;
                    statusMessage = `With ${marks} marks, you are on the waiting list. You may be called if seats remain vacant after the main admissions.`;
                    resultNoteElement.style.display = 'block';
                    resultNoteElement.textContent = statusMessage;
                } else {
                    // For marks < 20 (but this is already handled by the cutoff check)
                    expectedRank = 'Not Available';
                    statusMessage = 'It is almost impossible to get selected with this marks.';
                    resultNoteElement.style.display = 'block';
                    resultNoteElement.classList.add('result-below-cutoff');
                    resultNoteElement.textContent = statusMessage;
                }
                
                // Display results
                document.getElementById('resultName').textContent = name;
                document.getElementById('resultMarks').textContent = marks;
                
                if (expectedRank === 'Not Available') {
                    document.getElementById('resultRank').textContent = expectedRank;
                    document.getElementById('waitingListSection').style.display = 'none';
                } else {
                    document.getElementById('resultRank').textContent = `Rank: ${expectedRank}`;
                    
                    // Show or hide waiting list section based on rank
                    if (expectedRank <= course.totalSeats) {
                        document.getElementById('waitingListSection').style.display = 'none';
                    } else {
                        document.getElementById('waitingListSection').style.display = 'flex';
                        document.getElementById('resultWaitingRank').textContent = waitingListRank;
                    }
                }
                
                document.getElementById('result').style.display = 'block';
                
                // Log this calculation for analytics
                logCalculation({
                    name: name,
                    marks: marks,
                    rank: expectedRank,
                    waitingList: waitingListRank
                });
                
                // Update seat information with appropriate status
                const seatInfoDiv = document.getElementById('seatInfo');
                let statusText = 'Not Eligible';
                
                if (expectedRank !== 'Not Available') {
                    statusText = expectedRank <= course.totalSeats ? 'Selected' : 'Waiting List';
                }
                
                seatInfoDiv.innerHTML = `
                    <div class="seat-item total-seats">
                        Total Seats
                        <span class="seat-count">${course.totalSeats}</span>
                    </div>
                    <div class="seat-item">
                        Your Position
                        <span class="seat-count">${statusText}</span>
                    </div>
                `;
                
                // Scroll to results
                document.getElementById('result').scrollIntoView({behavior: 'smooth'});
            }
        });
    </script>
</body>
</html>
